---
layout: post
title: 服务治理之开发环境配置解决
category: [服务治理]
tags: [服务治理]
---


### 出现的问题

1. 新搭建的开发环境如何快速使用
2. 如何解决开发中路由问题（同一个服务或者接口不同调用者调用不同服务方）
3. 如何解决开发中使用host的问题


### 为什么测试环境和生产环境没有问题

测试和生产环境在服务和接口的环境调用比较简单，都是一一对应的。
在使用的过程中，服务治理这不需要关注调用者身份，只需根据服务中配置的
地址信息，选择一个可用的服务者来转发这个请求即可。

但是在开发环境中，服务和接口调用者关系比较复杂。我将调用者分成两种类型，
直接调用者和间接调用者。间接调用者的需求是最简单的，这个服务或者接口
我不需要关心，只要能返回结果。 直接调用者需求是最复杂的，直接调用者有非常
明确的服务提供者，有可能是整个服务下的接口，也有可能是服务下摸个接口。


### 没有服务治理之前怎么解决

###### 使用服务治理前

调用者和服务方是直接通信的，所有环境的配置都是在代码配置文件中，调用者可以
直接指定服务方地址。可以同修改配置文件和/etc/hosts文件来决定服务方

###### 使用服务治后

调用者和服务方是间接通信的， 服务治理做为中间方。调用者和服务方直接通信都是
服务治理的提供者。修改本地配置失效。


### 解决方法

服务治理只在服务信息和接口信息中新加路由表

|调用者|调用者|服务者|
|--|--|--|
在服务信息中新加域名信息


###### 1. 新搭建的开发环境如何快速使用
每一个服务需要一个默认可以使用的地址

###### 2. 如何解决开发中路由问题（同一个服务或者接口不同调用者调用不同服务方）
服务和接口分别有host的配置，通过调者IP地址来决定服务方的地址

###### 3. 如何解决开发中使用host的问题

为服务配置一个域名，在http的头部添加host即可。




